\section{Redefine stagnation}

\begin{lemma}
\label{lem:unconverge_neq_gb}
A particle won't stop moving when its personal best and global best are not the same, 
which means that 
$ \lim_{k \rightarrow \infty} v(k) \neq 0 $, if $ x^{P} \neq x^{G} $.
\begin{proof} 
There are two existing forces driving the movement of a particle, which are $ \Delta f^{G} $ and $ \Delta f^{P} $.
Thus we have
\begin{equation}
\begin{array}{lcl}
v(k+1) & = \chi ( v(k) + \Delta f^{G} (k) + \Delta f^{P} (k) ) \\
\Delta f^{G} (k) & = \phi^{G} u^{G} (k) (x^{G} - x(k)) \\
\Delta f^{P} (k) & = \phi^{P} u^{P} (k) (x^{P} - x(k)) 
\end{array}
\end{equation}
We can see that when $ \Delta f^{G} + \Delta f^{P} \neq 0 $, $ v(k)  \not \rightarrow 0 $.
When $ x^{P} \neq x^{G} $, $ \forall u^{P}(k), u^{G}(k) \in [0, 1] $, $ \not \exists x(k) $, $ \phi^{G} u^{G} (k) (x^{G} - x(k)) + \phi^{P} u^{G} (k) (x^{P} - x(k)) = 0 $.
It means that there exists no equilibrium due to the random factors $ u^{G} (k) $ and $ u^{P} (k) $. 
\end{proof}
\end{lemma}

The stagnation phenomenon is usually modeled as that the global best and personal best are not updated.
By Lemma \ref{lem:unconverge_neq_gb}, we know that in this case, the particle will never really converge.
However, in most of the cases, the personal best is highly likely to be updated if it is not the same with the global best.

There are two types of situations in the fitness space:
\begin{itemize}
\item global best and personal best are in same hill;
\item global best and personal best are not in same hill.
\end{itemize}

\subsection{Local optimal - One hill case}

While global best and personal best are in the same hill, the personal best will gradually move toward the global best.

\begin{figure}
\centering
\subfigure[Before updating personal best.] { \label{fig:one_hill_case:a}
\includegraphics[width=0.47\textwidth]{one_hill_case}
}
\subfigure[After updating personal best.] { \label{fig:one_hill_case:b}
\includegraphics[width=0.47\textwidth]{one_hill_case2}
}
\caption{One hill case.}
\label{fig:one_hill_case}
\end{figure}

\begin{lemma}
When $ f(x^{G}) > f(x^{P}) $ 
\end{lemma}

\begin{theorem}
When the personal best and the global best are in the same hill, the personal best and the global best will always converge to the local optimal.
\begin{proof}
When the personal best and the global best are in the same hill, there are only two cases.
\begin{itemize}
\item $ f(x^{G}) > f(x^{P}) $ 
\item $ f(x^{G}) = f(x^{P}) $ 
\end{itemize}
\end{proof}
\end{theorem}


\subsection{global optimal - Not one hill case}

When global best and personal best are not in the same hill, the case can be complicated.
There are two cases:
\begin{itemize}
\item the global best is at a hill whose top is higher than that the personal best is at [Figure \ref{fig:two_hills_case:a}];
\item the personal best is at a hill whose top is higher than that the global best is at [Figure \ref{fig:two_hills_case:b}]. 
\end{itemize}
By the moving of a particle, once the global best and the personal best get onto a same hill, it becomes the one hill case in Figure \ref{fig:one_hill_case:b}.
The problem can be answered in two steps:
\begin{itemize}
\item the likelihood that a particle moves a personal best or a global best;
\item the likelihood that a particle converges to a personal best or a global best.
\end{itemize}

\begin{figure}
\centering
\subfigure[The likelihood of moving to the global best.] {\label{fig:two_hills_case:a}
\includegraphics[width=0.57\textwidth]{two_hills_case}
}
\subfigure[The likelihood of moving to the personal best.] {\label{fig:two_hills_case:b}
\includegraphics[width=0.57\textwidth]{two_hills_case2}
}
\caption{Two hill case.}
\label{fig:two_hills_case}
\end{figure}


\begin{theorem}
There is a probability $ p $  that a particle moves toward the personal best, and $ 1 - p $ that a particle moves toward the global best,
\begin{equation}
p = 
\end{equation}
\end{theorem}

\begin{corollary}
There is probability $ p $ that the personal best can move to the same hill with the global best,
\begin{equation}
p = 
\end{equation}
\end{corollary}